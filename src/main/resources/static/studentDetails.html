<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Student Details</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet"/>

    <style>
        /* ===========================
           COLOR PALETTE
           =========================== */
        :root {
          --rose: rgb(255, 182, 185);
          --peach: rgb(250, 227, 217);
          --mint: rgb(187, 222, 214);
          --teal: rgb(97, 192, 191);

          --bg-light: linear-gradient(135deg, var(--rose), var(--mint));
          --bg-dark: linear-gradient(135deg, #1a001f, #2d0038); /* deep purple dark */

          --glass-light: rgba(255, 255, 255, 0.35);
          --glass-dark: rgba(0, 0, 0, 0.5);

          --text-light: #f1f1f1;
          --text-dark: #111;

          --neon-hover: var(--teal);
        }

        /* Smooth transitions */
        * { transition: all 0.3s ease; }

        body {
          margin: 0;
          height: 100vh;
          font-family: 'Inter', sans-serif;
          display: flex;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background: var(--bg-light);
          color: var(--text-dark);
        }

        /* Particle canvas */
        #particles {
          position: fixed;
          inset: 0;
          z-index: -1;
        }

        /* ===========================
           STUDENT CARD
           =========================== */
        .student-card {
          width: 600px;
          max-height: 80vh; /* Limit card height for scrolling */
          padding: 40px;
          border-radius: 20px;
          background: var(--glass-light);
          backdrop-filter: blur(15px);
          box-shadow: 0px 0px 25px rgba(0,0,0,0.15);
          border: 1px solid rgba(255, 255, 255, 0.5);
          animation: fadeIn 0.7s ease, floatCard 4s ease-in-out infinite, glowPulse 3s ease-in-out infinite;
          position: relative;

          overflow-y: auto; /* Enable scrolling */
          scrollbar-width: none; /* Firefox hide scrollbar */
        }

        /* Hide scrollbar for Chrome, Edge, Safari */
        .student-card::-webkit-scrollbar {
            display: none;
        }

        /* Neon border on hover */
        .student-card:hover {
          box-shadow: 0 0 25px var(--rose), 0 0 50px var(--teal);
          border: 1px solid var(--teal);
        }

        /* Title */
        h3 {
          font-size: 32px;
          font-weight: 700;
          margin-bottom: 20px;
          text-align: center;
          color: var(--teal);
        }

        /* Structured fields */
        p { font-size: 18px; margin: 10px 0; }
        p strong { color: var(--rose); }

        /* Section headings */
        h4 {
          margin-top: 25px;
          font-size: 22px;
          padding-bottom: 5px;
          color: var(--teal);
          border-bottom: 2px solid var(--rose);
        }

        /* List styling */
        ul { list-style: none; padding: 0; }
        li {
          padding: 8px 12px;
          background: rgba(255, 255, 255, 0.25);
          margin-bottom: 10px;
          border-radius: 10px;
          border-left: 4px solid var(--rose);
        }

        .empty-message { color: rgb(200,0,0); font-style: italic; }
        .loading { text-align: center; color: var(--teal); font-weight: 600; font-size: 20px; }

        /* Toggle button */
        .toggle {
          position: absolute;
          top: 20px;
          right: 20px;
          background: var(--peach);
          border: none;
          padding: 10px 18px;
          border-radius: 50px;
          cursor: pointer;
          font-weight: 600;
          box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
        }
        .toggle:hover { box-shadow: 0px 0px 12px var(--mint); }

        /* ===========================
           DARK MODE
           =========================== */
        .dark {
          background: var(--bg-dark);
          color: var(--text-light);
        }

        .dark .student-card {
          background: var(--glass-dark);
          border: 1px solid rgba(187, 222, 214, 0.4); /* mintish border */
          color: var(--text-light);
        }

        .dark h3 { color: var(--mint); }
        .dark h4 { color: var(--peach); border-bottom-color: var(--rose); }
        .dark p strong { color: var(--rose); }

        .dark li {
          background: rgba(255, 182, 185, 0.2);
          border-left-color: var(--teal);
        }

        /* Animations */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(25px); }
          to { opacity: 1; transform: translateY(0); }
        }

        @keyframes floatCard {
          0% { transform: translateY(0px); }
          50% { transform: translateY(-12px); }
          100% { transform: translateY(0px); }
        }

        @keyframes glowPulse {
          0% { box-shadow: 0 0 15px rgba(255,255,255,0.15); }
          50% { box-shadow: 0 0 35px rgba(255,255,255,0.35); }
          100% { box-shadow: 0 0 15px rgba(255,255,255,0.15); }
        }
    </style>
</head>

<body>

<!-- Particle Canvas -->
<canvas id="particles"></canvas>
<button class="toggle" id="toggleMode">Change Mode</button>

<!-- Card -->
<div class="student-card" id="card">
    <p class="loading">Loading student details...</p>
</div>

<script>
    /* =============================
       DARK MODE TOGGLE
       ============================= */
    const toggleBtn = document.getElementById("toggleMode");
    toggleBtn.onclick = () => {
      document.body.classList.toggle("dark");
    };

    /* =============================
       FETCH STUDENT DETAILS
       ============================= */
    const urlParams = new URLSearchParams(window.location.search);
    const studentId = urlParams.get("studentId");

    if (studentId) {
      fetch(`http://localhost:8080/api/student/details/${studentId}`)
        .then(res => res.json())
        .then(student => {
          document.getElementById("card").innerHTML = `

            <h3>ðŸŽ“ ${student.name || "Student"}</h3>

            <p><strong>Roll No:</strong> ${student.rollNo || "N/A"}</p>
            <p><strong>Gender:</strong> ${student.gender || "N/A"}</p>
            <p><strong>Section:</strong> ${student.section || "N/A"}</p>
            <p><strong>Email:</strong> ${student.email || "N/A"}</p>

            <h4>Marks</h4>
            <ul>
              ${
                student.marks?.length
                  ? student.marks.map(m =>
                      `<li><strong>${m.subject}</strong>: ${m.marks} marks (Grade: ${m.grade})</li>`
                    ).join('')
                  : `<li class="empty-message">No marks available</li>`
              }
            </ul>

            <h4>Lecturers</h4>
            <ul>
              ${
                student.lecturers?.length
                  ? student.lecturers.map(l =>
                      `<li><strong>${l.name}</strong> â€” ${l.department}</li>`
                    ).join('')
                  : `<li class="empty-message">No lecturers available</li>`
              }
            </ul>
          `;

          // Re-attach toggle inside card
          document.getElementById("toggleMode").onclick = () => {
            document.body.classList.toggle("dark");
          };
        });
    }

    /* =============================
       PARTICLE BACKGROUND
       ============================= */
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d");
    canvas.width = innerWidth;
    canvas.height = innerHeight;

    let particles = [];
    for (let i = 0; i < 75; i++) {
      particles.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        s: Math.random()*2+1,
        vx: Math.random()*0.6-0.3,
        vy: Math.random()*0.6-0.3
      });
    }

    function animateParticles() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;

        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

        ctx.beginPath();
        ctx.fillStyle = "rgba(255,255,255,0.4)";
        ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
        ctx.fill();
      });
      requestAnimationFrame(animateParticles);
    }
    animateParticles();
</script>

</body>
</html>



