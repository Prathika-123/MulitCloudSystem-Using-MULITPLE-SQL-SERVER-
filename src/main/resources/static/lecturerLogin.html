<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lecturer Login — Glassmorphism</title>
    <style>
        :root {
          --c1: rgb(78, 86, 192);
          --c2: rgb(155, 93, 224);
          --c3: rgb(215, 143, 238);
          --c4: rgb(253, 207, 250);
          --glass-bg: rgba(255,255,255,0.15);
          --glass-border: rgba(255,255,255,0.25);
        }
        body {
          margin: 0;
          font-family: "Poppins", sans-serif;
          background: linear-gradient(135deg, var(--c1), var(--c3));
          min-height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          transition: background 0.4s ease;
        }

        body.dark {
          background: linear-gradient(135deg, #0a0a0f, #1b1b2e);
          color: white;
        }

        /* Floating particles */
        .particles {
          position: absolute;
          inset: 0;
          overflow: hidden;
          z-index: -1;
        }
        .particle {
          position: absolute;
          width: 6px;
          height: 6px;
          background: white;
          border-radius: 50%;
          opacity: 0.7;
          animation: floatUp linear infinite;
        }
        @keyframes floatUp {
          from { transform: translateY(100vh); }
          to { transform: translateY(-10vh); }
        }

        .card {
          width: 340px;
          padding: 30px;
          border-radius: 20px;
          background: var(--glass-bg);
          border: 1px solid var(--glass-border);
          backdrop-filter: blur(15px);
          box-shadow: 0 0 35px rgba(0,0,0,0.2);
          animation: fadeIn 0.8s ease;
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }

        .title {
          font-size: 28px;
          text-align: center;
          font-weight: 700;
          margin-bottom: 20px;
          color: white;
        }

        .input-group {
          margin-bottom: 15px;
        }
        input {
          width: 100%;
          padding: 12px;
          border-radius: 10px;
          border: none;
          outline: none;
          background: rgba(255,255,255,0.2);
          backdrop-filter: blur(10px);
          font-size: 15px;
          color: #fff;
        }
        input::placeholder { color: #eee; }

        .btn {
          width: 100%;
          padding: 12px;
          font-size: 16px;
          border-radius: 10px;
          border: none;
          cursor: pointer;
          background: linear-gradient(90deg, var(--c2), var(--c3));
          color: white;
          font-weight: 600;
          transition: 0.3s;
        }
        .btn:hover {
          transform: scale(1.03);
          box-shadow: 0 0 15px var(--c3);
        }

        /* Dark Mode Toggle */
        .toggle {
          position: absolute;
          top: 20px;
          right: 20px;
          width: 60px;
          height: 30px;
          background: rgba(255,255,255,0.3);
          border-radius: 30px;
          cursor: pointer;
          display: flex;
          align-items: center;
          padding: 3px;
          transition: 0.4s;
        }
        .toggle-circle {
          width: 24px;
          height: 24px;
          background: white;
          border-radius: 50%;
          transition: 0.4s;
        }
        body.dark .toggle {
          background: rgba(0,0,0,0.4);
        }
        body.dark .toggle-circle {
          transform: translateX(30px);
        }

        /* Loader */
        #overlay {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.45);
          display: flex;
          justify-content: center;
          align-items: center;
          opacity: 0;
          pointer-events: none;
          transition: 0.3s;
        }
        #overlay.show {
          opacity: 1;
          pointer-events: all;
        }
        .spinner {
          width: 45px;
          height: 45px;
          border: 5px solid #fff;
          border-top-color: transparent;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
          to { transform: rotate(360deg); }
        }

    </style>
</head>
<body>
<!-- Dark mode toggle -->
<div class="toggle" id="darkToggle">
    <div class="toggle-circle"></div>
</div>

<!-- floating particles -->
<div class="particles" id="particles"></div>

<div class="card">
    <div class="title">Lecturer Login</div>

    <div class="input-group">
        <input type="email" id="email" placeholder="Enter your email" required />
    </div>

    <button class="btn" id="signinBtn">Sign In</button>
</div>

<!-- Loader -->
<div id="overlay"><div class="spinner"></div></div>

<script>
    /******** DARK MODE ********/
    const toggle = document.getElementById('darkToggle');
    const body = document.body;
    if(localStorage.getItem('theme') === 'dark') body.classList.add('dark');

    toggle.addEventListener('click', () => {
      const isDark = body.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    /******** PARTICLES ********/
    const container = document.getElementById('particles');
    for (let i = 0; i < 40; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.left = Math.random() * 100 + 'vw';
      p.style.animationDuration = 5 + Math.random() * 8 + 's';
      p.style.opacity = Math.random();
      container.appendChild(p);
    }

    /******** LOGIN — BACKEND CALL ********/
    const signin = document.getElementById('signinBtn');
    const overlay = document.getElementById('overlay');

    signin.addEventListener('click', async () => {
        const email = document.getElementById('email');

        if (!email.checkValidity()) {
            email.reportValidity();
            return;
        }

        overlay.classList.add('show');

        try {
            const res = await fetch("http://localhost:8080/api/student/lecturer/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email: email.value })
            });

            const data = await res.json();
            console.log("Response: ", data);

            if (data.success) {
                window.location.href = `lecturerDashboard.html?id=${data.lecturerId}`;
            } else {
                alert(data.message || "Invalid Email");
            }

        } catch (e) {
            console.error(e);
            alert("Server error. Try again.");
        }

        overlay.classList.remove('show');
    });
</script>

</body>
</html>
