<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecturer Login — Ultra Premium</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
          --c1: rgb(78, 86, 192);
          --c2: rgb(155, 93, 224);
          --c3: rgb(215, 143, 238);
          --c4: rgb(253, 207, 250);

          --glass-light: rgba(255,255,255,0.2);
          --glass-dark: rgba(0,0,0,0.6);
        }

        /* BODY */
        body{
          margin:0;
          height: 100vh;
          display:flex;
          justify-content:center;
          align-items:center;
          font-family:'Poppins',sans-serif;
          background: linear-gradient(135deg, var(--c1), var(--c2), var(--c3), var(--c4));
          background-size: 300% 300%;
          animation: gradientMove 12s infinite alternate;
          overflow:hidden;
        }

        @keyframes gradientMove{
          0% {background-position:0% 50%;}
          100%{background-position:100% 50%;}
        }

        /* CANVAS BACKGROUND */
        canvas{
          position:fixed;
          top:0;
          left:0;
          z-index:-1;
        }

        /* FLOATING ORBS */
        .orb{
          position:absolute;
          width:300px;
          height:300px;
          border-radius:50%;
          filter: blur(120px);
          animation: float 15s infinite alternate;
          z-index:-1;
        }

        .orb.one{ background:var(--c2); left:5%; top:10%; }
        .orb.two{ background:var(--c4); right:5%; bottom:10%; }
        .orb.three{ background:var(--c3); top:60%; left:40%; }

        @keyframes float{
          from{ transform:translateY(0); }
          to{ transform:translateY(-70px) translateX(40px); }
        }

        /* DARK MODE */
        body.dark{
          background:linear-gradient(120deg,#0a0014,#1a0235,#1f0738);
        }

        /* TOGGLE */
        .toggle-wrapper{
          position:fixed;
          top:20px;
          right:30px;
          z-index:99;
        }

        .toggle{
          width:60px;
          height:30px;
          background:#eee;
          border-radius:30px;
          position:relative;
          cursor:pointer;
        }

        .toggle-circle{
          width:26px;
          height:26px;
          background:white;
          border-radius:50%;
          position:absolute;
          top:2px;
          left:2px;
          transition:0.4s;
        }

        body.dark .toggle{
          background:var(--c2);
        }

        body.dark .toggle-circle{
          transform:translateX(30px);
        }

        /* GLASS CARD */
        .card{
          width:380px;
          padding:45px;
          border-radius:28px;
          background:var(--glass-light);
          backdrop-filter: blur(25px);
          box-shadow:0 20px 60px rgba(0,0,0,0.55);
          animation: levitate 4s infinite;
        }

        @keyframes levitate{
          0%,100%{ transform:translateY(0); }
          50%{ transform:translateY(-10px); }
        }

        body.dark .card{
          background:var(--glass-dark);
          color:white;
        }

        /* TITLE */
        .title{
          font-size:30px;
          text-align:center;
          font-weight:700;
          margin-bottom:22px;
          background:linear-gradient(120deg,var(--c3),var(--c4));
          -webkit-background-clip:text;
          -webkit-text-fill-color:transparent;
        }

        /* INPUT */
        input{
          width:100%;
          padding:15px;
          border-radius:14px;
          border:none;
          margin:14px 0;
          font-size:16px;
          background:rgba(255,255,255,0.75);
        }

        input:focus{
          outline:none;
          box-shadow:0 0 0 2px var(--c3), 0 0 15px var(--c4);
          transform:scale(1.02);
        }

        body.dark input{
          background:rgba(255,255,255,0.1);
          color:white;
        }

        /* BUTTON */
        .btn{
          margin-top:10px;
          width:100%;
          padding:16px;
          border:none;
          border-radius:14px;
          font-size:17px;
          font-weight:600;
          color:white;
          background:linear-gradient(120deg,var(--c1),var(--c2),var(--c3));
          background-size:200%;
          cursor:pointer;
          transition:0.4s;
        }

        .btn:hover{
          background-position:right;
          transform:translateY(-3px);
          box-shadow:0 0 25px var(--c3);
        }

        /* SUCCESS CIRCLE */
        .success-circle{
          position:absolute;
          width:20px;
          height:20px;
          background:var(--c4);
          border-radius:50%;
          transform:scale(0);
          animation:successWave 1.2s ease forwards;
          top:50%;
          left:50%;
          translate:-50% -50%;
        }

        @keyframes successWave{
          0%{ transform:scale(0); opacity:1;}
          70%{ transform:scale(20); opacity:0.6;}
          100%{ transform:scale(40); opacity:0;}
        }

        /* ERROR */
        .error{
          margin-top:10px;
          text-align:center;
          color:#ffb3b3;
          font-size:14px;
        }

        /* LOADER */
        #overlay{
          position:fixed;
          inset:0;
          background:rgba(0,0,0,0.45);
          display:flex;
          justify-content:center;
          align-items:center;
          opacity:0;
          pointer-events:none;
          transition:0.3s;
          z-index:3;
        }
        #overlay.show{
          opacity:1;
          pointer-events:all;
        }
        .spinner{
          width:45px;
          height:45px;
          border:5px solid #fff;
          border-top-color: transparent;
          border-radius:50%;
          animation:spin .8s linear infinite;
        }
        @keyframes spin{to{transform:rotate(360deg)}}

        /* MOBILE */
        @media(max-width:440px){
          .card{ width:95%; padding:28px; }
        }
    </style>
</head>

<body>

<canvas id="particleCanvas"></canvas>

<div class="orb one"></div>
<div class="orb two"></div>
<div class="orb three"></div>

<!-- Dark Toggle -->
<div class="toggle-wrapper">
    <div class="toggle" id="darkToggle">
        <div class="toggle-circle"></div>
    </div>
</div>

<!-- Card -->
<div class="card" id="card">
    <div class="title">Lecturer Login</div>
    <input type="email" id="email" placeholder="Enter your email" required>
    <button class="btn" id="signinBtn">Sign In</button>
    <div class="error" id="errorMessage"></div>
</div>

<!-- Loader -->
<div id="overlay"><div class="spinner"></div></div>

<script>
    /***** DARK MODE ******/
    if(localStorage.getItem('theme')==='dark') document.body.classList.add('dark');

    document.getElementById('darkToggle').addEventListener('click',()=>{
      let isDark=document.body.classList.toggle('dark');
      localStorage.setItem('theme',isDark?'dark':'light');
    });

    /***** PARTICLES *****/
    const canvas = document.getElementById("particleCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles=[];
    for(let i=0;i<60;i++){
      particles.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        size:Math.random()*4+1,
        speedX:(Math.random()-0.5)*1.5,
        speedY:(Math.random()-0.5)*1.5
      });
    }

    function animateParticles(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach(p=>{
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
        ctx.fillStyle="rgba(255,255,255,0.5)";
        ctx.fill();
        p.x+=p.speedX;
        p.y+=p.speedY;
        if(p.x<0||p.x>canvas.width)p.speedX*=-1;
        if(p.y<0||p.y>canvas.height)p.speedY*=-1;
      });
      requestAnimationFrame(animateParticles);
    }
    animateParticles();

    /******** BACKEND — SAME LOGIC ********/
    const signin = document.getElementById('signinBtn');
    const overlay = document.getElementById('overlay');
    const errorBox = document.getElementById('errorMessage');

    signin.addEventListener('click', async () => {
      const emailInput=document.getElementById('email');
      const email=emailInput.value.trim();
      errorBox.textContent="";

      if(!emailInput.checkValidity()){
        emailInput.reportValidity();
        return;
      }

      overlay.classList.add('show');

      try{
        const res = await fetch("http://localhost:8080/api/student/lecturer/login",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({email})
        });

        const data = await res.json();

        if(data.status==="Login successful!!"){
          const circle=document.createElement("div");
          circle.className="success-circle";
          document.getElementById('card').appendChild(circle);

          setTimeout(()=>{
            window.location.href="lecturerDetails.html?name="+
            encodeURIComponent(data.name)+
            "&email="+
            encodeURIComponent(data.email);
            circle.remove();
          },1000);

        }else{
          errorBox.textContent=data.status||"Invalid Email";
        }
      }catch(e){
        errorBox.textContent="Server error. Try again.";
      }

      overlay.classList.remove('show');
    });
</script>
</body>
</html>
